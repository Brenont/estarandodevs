<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<title>Aparecida Nutrição</title>
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/index.css">
</head>

<body>

	<header>
		<div class="container">
			<h1>Aparecida Nutrição</h1>
		</div>
	</header>
	<main>
		<section class="container">
			<h2>Meus pacientes</h2>
			<table>
				<thead>
					<tr>
						<th>Nome</th>
						<th>Peso(kg)</th>
						<th>Altura(m)</th>
						<th>Gordura Corporal(%)</th>
						<th>IMC</th>
					</tr>
				</thead>
				<tbody id="tabela-pacientes">
					<tr class="paciente">
						<td class="info-nome">Breno</td>
						<td class="info-peso">60</td>
						<td class="info-altura">1.76</td>
						<td class="info-gordura">10</td>
						<td class="info-imc">0</td>
					</tr>

					<tr class="paciente">
						<td class="info-nome">Pablo</td>
						<td class="info-peso">90</td>
						<td class="info-altura">3.00</td>
						<td class="info-gordura">40</td>
						<td class="info-imc">0</td>
					</tr>

					<tr class="paciente">
						<td class="info-nome">Igor</td>
						<td class="info-peso">50</td>
						<td class="info-altura">1.74</td>
						<td class="info-gordura">7</td>
						<td class="info-imc">0</td>
					</tr>

					<tr class="paciente">
						<td class="info-nome">Jarilson</td>
						<td class="info-peso">51</td>
						<td class="info-altura">1.70</td>
						<td class="info-gordura">6</td>
						<td class="info-imc">0</td>
					</tr>
					<tr class="paciente">
						<td class="info-nome">Angelo</td>
						<td class="info-peso">63</td>
						<td class="info-altura">1.70</td>
						<td class="info-gordura">30</td>
						<td class="info-imc">0</td>
					</tr>
				</tbody>
			</table>

		</section>
	</main>
	<script>
		// Instanciando os pacientes da tabela
		var pacientes = document.querySelectorAll(".paciente");

		// Loop que percorre os pacientes da tabela e calcula o IMC
		for (var i = 0; i < pacientes.length; i = i + 1) {
			// Variavel referente ao inidice do paciente
			var paciente = pacientes[i];

			// Variaveis elemento td
			var tdPeso = paciente.querySelector(".info-peso");
			var tdAltura = paciente.querySelector(".info-altura");
			var tdImc = paciente.querySelector(".info-imc");

			// Variaveis dados da tabela
			var peso = tdPeso.textContent;
			var altura = tdAltura.textContent;
			var imcpaciente = tdImc.textContent;

			var alturaEhValida = true;
			var pesoEhValido = true;

			// Validação de Altura e Peso
			if (peso >= 200 || peso <= 0) {
				pesoEhValido = false;
				tdImc.textContent = "Peso Inválido";
				//pintando tr com peso invalido
				paciente.classList.add("paciente-invalido");
			}
			if (altura >= 3.00 || altura <= 0) {
				alturaEhValida = false;
				tdImc.textContent = "Altura Inválida"
				//pintando tr com altura invalida
				paciente.classList.add("paciente-invalido");
			}

			// Calculo IMC
			if (pesoEhValido && alturaEhValida) {

				var imc = peso / (altura * altura);

				// Mudando o conteudo do TD IMC
				tdImc.textContent = imc.toFixed(2);
			}
		}

	</script>
</body>

</html>